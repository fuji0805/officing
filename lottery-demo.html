<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>くじシステム - デモ</title>
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
    <div id="app"></div>

    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Mock Config for Demo -->
    <script>
        const CONFIG = {
            SUPABASE_URL: 'https://demo.supabase.co',
            SUPABASE_ANON_KEY: 'demo-key'
        };
    </script>
    
    <!-- Mock Supabase Client for Demo -->
    <script>
        let supabaseClient = null;
        
        function initSupabase() {
            // Mock client for demo
            return {
                auth: {
                    getUser: async () => ({ data: { user: { id: 'demo-user-id', email: 'demo@example.com' } }, error: null })
                },
                from: (table) => ({
                    select: () => ({
                        eq: () => ({
                            single: async () => {
                                if (table === 'user_progress') {
                                    return { data: { user_id: 'demo-user-id', level: 5 }, error: null };
                                }
                                if (table === 'lottery_tickets') {
                                    return { data: { ticket_count: 3 }, error: null };
                                }
                                return { data: null, error: null };
                            }
                        })
                    })
                })
            };
        }
        
        function getSupabaseClient() {
            if (!supabaseClient) {
                supabaseClient = initSupabase();
            }
            return supabaseClient;
        }
        
        async function getCurrentUser() {
            const client = getSupabaseClient();
            const { data } = await client.auth.getUser();
            return data.user;
        }
    </script>
    
    <script src="/js/lottery.js"></script>
    
    <script>
        // デモ用に自動的にくじ画面を表示
        document.addEventListener('DOMContentLoaded', () => {
            lotteryManager.showLotteryScreen();
        });
    </script>
</body>
</html>
